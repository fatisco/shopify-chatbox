<!DOCTYPE html>
<html>
<head>
  <title>Admin Chat</title>
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
  <h2>Admin Chat</h2>
  <div id="chat"></div>
  <input id="room" placeholder="Customer ID" />
  <input id="message" autocomplete="off" />
  <button onclick="sendMessage()">Send</button>

  <!-- Notification sound -->
  <audio id="notif-sound" src="/static/notification.mp3" preload="auto"></audio>

  <script>
    const socket = io();

    socket.on("message", (data) => {
      const chat = document.getElementById("chat");
      const msg = document.createElement("p");
      msg.textContent = data.sender + ": " + data.message;
      chat.appendChild(msg);

      // Play sound if message is from Customer
      if (data.sender === "Customer") {
        document.getElementById("notif-sound").play();
      }
    });

    function sendMessage() {
      const room = document.getElementById("room").value;
      const input = document.getElementById("message");
      socket.emit("message", { room: room, sender: "Admin", message: input.value });
      input.value = "";
    }
  </script>
</body>
</html>
